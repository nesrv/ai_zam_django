import os
import django

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'ai_zam.settings')
django.setup()

from object.models import Resurs, KategoriyaResursa

# Данные для добавления
resources_data = [
    ("ИТР", "час", "Кадровое обеспечение"),
    ("Каменщик", "час", "Кадровое обеспечение"),
    ("Подсобный рабочий", "час", "Кадровое обеспечение"),
    ("Альпинист", "час", "Кадровое обеспечение"),
    ("Альпинист-Газорезчик", "час", "Кадровое обеспечение"),
    ("Газорезчик", "час", "Кадровое обеспечение"),
    ("Производитель работ", "час", "Кадровое обеспечение"),
    ("Главный инженер", "час", "Кадровое обеспечение"),
    ("Начальник участка", "час", "Кадровое обеспечение"),
    ("Помощник начальника участка", "час", "Кадровое обеспечение"),
    ("Минипогрузчик", "шт", "Машины и механизмы"),
    ("Автокран", "шт", "Машины и механизмы"),
    ("Раствор", "м3", "Инструмент и материалы"),
    ("Кирпич полнотелый", "шт", "Инструмент и материалы"),
    ("Мелкие инструменты", "к-т", "Инструмент и материалы"),
    ("ЗИП для страховочных систем", "к-т", "Инструмент и материалы"),
    ("Биотуалет", "шт", "Административно бытовые расходы"),
    ("Ботинки", "пар", "СИЗ и спецодежда"),
    ("Жилет сигнальный", "шт", "СИЗ и спецодежда"),
    ("Устройство кирпичных перегородок", "м2", "Подрядные организации"),
]

for name, unit, category_name in resources_data:
    try:
        category = KategoriyaResursa.objects.get(nazvanie=category_name)
        resurs, created = Resurs.objects.get_or_create(
            naimenovanie=name,
            defaults={
                'edinica_izmereniya': unit,
                'kategoriya_resursa': category
            }
        )
        if created:
            print(f"Добавлен ресурс: {name}")
        else:
            print(f"Ресурс уже существует: {name}")
    except KategoriyaResursa.DoesNotExist:
        print(f"Категория не найдена: {category_name}")

print("Готово!")