{% extends 'base/base.html' %}

{% block title %}Сотрудники по должности - {{ object.nazvanie }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1>Сотрудники объекта "{{ object.nazvanie }}"</h1>
    
    <div class="card mb-4">
        <div class="card-header">
            <h5>Поиск сотрудников по должности</h5>
        </div>
        <div class="card-body">
            <div class="row mb-3">
                <div class="col-md-8">
                    <div class="input-group">
                        <input type="text" id="position-input" class="form-control" 
                               placeholder="Введите должность или специальность" 
                               data-object-id="{{ object.id }}" 
                               data-target-table="employees-table-body">
                        <div class="input-group-append">
                            <button class="btn btn-primary position-search-button" 
                                    data-object-id="{{ object.id }}" 
                                    data-target-table="employees-table-body">
                                Найти
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="table-responsive">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>ФИО</th>
                            <th>Специальность</th>
                            <th>Организация</th>
                            <th>Подразделение</th>
                        </tr>
                    </thead>
                    <tbody id="employees-table-body">
                        <tr>
                            <td colspan="5" class="text-center">Введите должность для поиска сотрудников</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <div class="card">
        <div class="card-header">
            <h5>Выбор сотрудника по должности</h5>
        </div>
        <div class="card-body">
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="position-select">Должность:</label>
                        <select id="position-select" class="form-control position-search-select" 
                                data-object-id="{{ object.id }}" 
                                data-target-select="employee-select">
                            <option value="">Выберите должность</option>
                            <option value="Водитель">Водитель</option>
                            <option value="Механик">Механик</option>
                            <option value="Сварщик">Сварщик</option>
                            <option value="Инженер">Инженер</option>
                            <option value="Прораб">Прораб</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="employee-select">Сотрудник:</label>
                        <select id="employee-select" class="form-control">
                            <option value="">Сначала выберите должность</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/employees_by_position.js' %}"></script>
{% endblock %}