{% extends 'base/base.html' %}
{% load static %}

{% block title %}–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∏—Å–∫–æ–≤ –ø–µ—Ä–µ—Ä–∞—Å—Ö–æ–¥–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ - AI-ZAM{% endblock %}

{% block extra_styles %}
<link rel="stylesheet" href="{% static 'css/risk-prediction.css' %}">
<link rel="stylesheet" href="{% static 'css/risk-prediction-loader.css' %}">
<link rel="stylesheet" href="{% static 'css/risk-prediction-particles.css' %}">
<link rel="stylesheet" href="{% static 'css/risk-prediction-fix.css' %}">
<style>
    /* Inline fix for chart containers */
    .risk-chart-container,
    .resource-breakdown,
    .risk-factors {
        overflow: visible !important;
    }

    canvas {
        max-height: 100% !important;
    }
</style>
{% endblock %}

{% block extra_scripts %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/gsap.min.js"></script>
<script src="{% static 'js/chart-options-fix.js' %}"></script>
<script src="{% static 'js/risk-prediction.js' %}"></script>
<script src="{% static 'js/risk-prediction-particles.js' %}"></script>
<script src="{% static 'js/risk-prediction-fix.js' %}"></script>
{% endblock %}

{% block content %}
<!-- Loader -->
<div class="loader-container" id="loader">
    <div class="loader">
        <div class="loader-circle"></div>
        <div class="loader-circle"></div>
        <div class="loader-circle"></div>
        <div class="loader-text">–ó–ê–ì–†–£–ó–ö–ê –ê–ù–ê–õ–ò–¢–ò–ö–ò</div>
    </div>
</div>

<!-- Background Particles -->
<div class="particles-container"></div>

<div class="risk-dashboard" style="overflow-y: auto; max-height: 100vh;">
    <div class="dashboard-header">
        <h1 class="dashboard-title">–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∏—Å–∫–æ–≤ –ø–µ—Ä–µ—Ä–∞—Å—Ö–æ–¥–∞ —Ä–µ—Å—É—Ä—Å–æ–≤</h1>
        <p class="dashboard-subtitle">–ü—Ä–µ–¥–∏–∫—Ç–∏–≤–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –Ω–∞ –±–∞–∑–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö
            –ø—Ä–µ–≤—ã—à–µ–Ω–∏–π –±—é–¥–∂–µ—Ç–∞ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –Ω–∞ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–∞—Ö</p>
    </div>

    <div class="project-selector">
        <button class="project-btn active" data-project="project1">–†–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –æ–±—ä–µ–∫—Ç–∞</button>
        <button class="project-btn" data-project="project2">–°–Ω–æ—Å —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ–≥–æ –∫–æ–º–ø–ª–µ–∫—Å–∞</button>
    </div>

    <div class="dashboard-grid">
        <!-- Main Risk Chart -->
        <div class="dashboard-card risk-chart-container animate-in delay-1">
            <div class="card-glow"></div>
            <div class="card-header">
                <div class="card-title">–î–∏–Ω–∞–º–∏–∫–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤ –∏ –ø—Ä–æ–≥–Ω–æ–∑ –ø–µ—Ä–µ—Ä–∞—Å—Ö–æ–¥–∞</div>
                <div class="card-icon">üìà</div>
            </div>
            <div style="height: 350px; position: relative;">
                <canvas id="riskChart"></canvas>
            </div>
        </div>

        <!-- Risk Metrics -->
        <div class="dashboard-card risk-metrics animate-in delay-2">
            <div class="card-glow"></div>
            <div class="card-header">
                <div class="card-title">–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —Ä–∏—Å–∫–æ–≤</div>
                <div class="card-icon">üéØ</div>
            </div>

            <div class="metric-card">
                <div class="metric-icon">‚ö†Ô∏è</div>
                <div>
                    <div class="metric-value">78%</div>
                    <div class="metric-label">–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø–µ—Ä–µ—Ä–∞—Å—Ö–æ–¥–∞</div>
                </div>
            </div>

            <div class="metric-card">
                <div class="metric-icon">üí≥</div>
                <div>
                    <div class="metric-value">22%</div>
                    <div class="metric-label">–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º—ã–π –ø–µ—Ä–µ—Ä–∞—Å—Ö–æ–¥</div>
                </div>
            </div>

            <div class="metric-card">
                <div class="metric-icon">‚è±Ô∏è</div>
                <div>
                    <div class="metric-value">85%</div>
                    <div class="metric-label">–¢–æ—á–Ω–æ—Å—Ç—å –ø—Ä–æ–≥–Ω–æ–∑–∞</div>
                </div>
            </div>

            <div class="metric-card">
                <div class="metric-icon">üõ†Ô∏è</div>
                <div>
                    <div class="metric-value">92%</div>
                    <div class="metric-label">–ò–Ω–¥–µ–∫—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤</div>
                </div>
            </div>
        </div>

        <!-- Resource Breakdown -->
        <div class="dashboard-card resource-breakdown animate-in delay-3">
            <div class="card-glow"></div>
            <div class="card-header">
                <div class="card-title">–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤</div>
                <div class="card-icon">üìä</div>
            </div>

            <div style="height: 250px; position: relative;">
                <canvas id="resourceChart"></canvas>
            </div>

            <div class="resource-item">
                <div class="resource-icon">üß±</div>
                <div class="resource-info">
                    <div class="resource-name">–ú–∞—Ç–µ—Ä–∏–∞–ª—ã</div>
                    <div class="resource-progress">
                        <div class="resource-bar overbudget" data-width="85"></div>
                    </div>
                    <div class="resource-values">
                        <span>–ë—é–¥–∂–µ—Ç: 2.5M ‚ÇΩ</span>
                        <span>–†–∞—Å—Ö–æ–¥: 3.2M ‚ÇΩ</span>
                    </div>
                </div>
            </div>

            <div class="resource-item">
                <div class="resource-icon">‚öôÔ∏è</div>
                <div class="resource-info">
                    <div class="resource-name">–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ</div>
                    <div class="resource-progress">
                        <div class="resource-bar warning" data-width="75"></div>
                    </div>
                    <div class="resource-values">
                        <span>–ë—é–¥–∂–µ—Ç: 1.8M ‚ÇΩ</span>
                        <span>–†–∞—Å—Ö–æ–¥: 1.9M ‚ÇΩ</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Timeline Analysis -->
        <div class="dashboard-card timeline-analysis animate-in delay-4">
            <div class="card-glow"></div>
            <div class="card-header">
                <div class="card-title">–í—Ä–µ–º–µ–Ω–Ω–∞—è —à–∫–∞–ª–∞ —Ä–∏—Å–∫–æ–≤</div>
                <div class="card-icon">üóìÔ∏è</div>
            </div>

            <div class="timeline-point">
                <div class="timeline-marker">1</div>
                <div class="timeline-content">
                    <div class="timeline-date">15 –º–∞—Ä—Ç–∞ 2025</div>
                    <div class="timeline-event">–ü–µ—Ä–µ—Ä–∞—Å—Ö–æ–¥ –Ω–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã</div>
                    <div class="timeline-desc">–ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –±—é–¥–∂–µ—Ç–∞ –Ω–∞ –∑–∞–∫—É–ø–∫—É —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –Ω–∞ 15%</div>
                    <span class="risk-badge risk-medium">–°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫</span>
                </div>
            </div>

            <div class="timeline-point">
                <div class="timeline-marker">2</div>
                <div class="timeline-content">
                    <div class="timeline-date">22 –º–∞—è 2025</div>
                    <div class="timeline-event">–ó–∞–¥–µ—Ä–∂–∫–∞ –ø–æ—Å—Ç–∞–≤–æ–∫ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è</div>
                    <div class="timeline-desc">–°—Ä—ã–≤ —Å—Ä–æ–∫–æ–≤ –ø–æ—Å—Ç–∞–≤–∫–∏ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –Ω–∞ 10 –¥–Ω–µ–π</div>
                    <span class="risk-badge risk-high">–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫</span>
                </div>
            </div>

            <div class="timeline-point">
                <div class="timeline-marker">3</div>
                <div class="timeline-content">
                    <div class="timeline-date">10 –∏—é–ª—è 2025</div>
                    <div class="timeline-event">–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º—ã–π –ø–µ—Ä–µ—Ä–∞—Å—Ö–æ–¥ –±—é–¥–∂–µ—Ç–∞</div>
                    <div class="timeline-desc">–í—ã—Å–æ–∫–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –æ–±—â–µ–≥–æ –±—é–¥–∂–µ—Ç–∞ –Ω–∞ 22%</div>
                    <span class="risk-badge risk-high">–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫</span>
                </div>
            </div>
        </div>

        <!-- Risk Factors -->
        <div class="dashboard-card risk-factors animate-in delay-5">
            <div class="card-glow"></div>
            <div class="card-header">
                <div class="card-title">–§–∞–∫—Ç–æ—Ä—ã —Ä–∏—Å–∫–∞</div>
                <div class="card-icon">üîç</div>
            </div>

            <div style="height: 250px; position: relative;">
                <canvas id="radarChart"></canvas>
            </div>

            <div class="progress-container">
                <div class="progress-label">
                    <span>–ü–µ—Ä–µ—Ä–∞—Å—Ö–æ–¥ –±—é–¥–∂–µ—Ç–∞</span>
                    <span>80%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill high" data-width="80"></div>
                </div>
            </div>

            <div class="progress-container">
                <div class="progress-label">
                    <span>–ó–∞–¥–µ—Ä–∂–∫–∏ –ø–æ—Å—Ç–∞–≤–æ–∫</span>
                    <span>60%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill medium" data-width="60"></div>
                </div>
            </div>

            <div class="progress-container">
                <div class="progress-label">
                    <span>–ù–µ—Ö–≤–∞—Ç–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞</span>
                    <span>45%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill low" data-width="45"></div>
                </div>
            </div>
        </div>

        <!-- Recommendations -->
        <div class="dashboard-card recommendations animate-in delay-6">
            <div class="card-glow"></div>
            <div class="card-header">
                <div class="card-title">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å–Ω–∏–∂–µ–Ω–∏—é —Ä–∏—Å–∫–æ–≤</div>
                <div class="card-icon">üí°</div>
            </div>

            <div class="recommendation-item">
                <div class="recommendation-icon">üìâ</div>
                <div class="recommendation-text">
                    <strong>–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–∫—É–ø–æ–∫ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤</strong>: –ü–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏ –∏ –Ω–∞–π—Ç–∏ –±–æ–ª–µ–µ
                    –≤—ã–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –∑–∞—Ç—Ä–∞—Ç –Ω–∞ 15%.
                </div>
            </div>

            <div class="recommendation-item">
                <div class="recommendation-icon">‚è∞</div>
                <div class="recommendation-text">
                    <strong>–£—Å–∫–æ—Ä–µ–Ω–∏–µ –ø–æ—Å—Ç–∞–≤–æ–∫</strong>: –ó–∞–∫–ª—é—á–∏—Ç—å –¥–æ–≥–æ–≤–æ—Ä—ã —Å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–º–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞–º–∏ –¥–ª—è
                    –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∏—Å–∫–æ–≤ –∑–∞–¥–µ—Ä–∂–µ–∫ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤.
                </div>
            </div>

            <div class="recommendation-item">
                <div class="recommendation-icon">üë•</div>
                <div class="recommendation-text">
                    <strong>–ü–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞</strong>: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã –±—Ä–∏–≥–∞–¥ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è
                    —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç—Ä—É–¥–æ–≤—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤.
                </div>
            </div>

            <div class="recommendation-item">
                <div class="recommendation-icon">üìã</div>
                <div class="recommendation-text">
                    <strong>–ü–µ—Ä–µ—Å–º–æ—Ç—Ä –±—é–¥–∂–µ—Ç–∞</strong>: –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —Ñ–æ–Ω–¥ –≤ —Ä–∞–∑–º–µ—Ä–µ 10% –æ—Ç –æ–±—â–µ–≥–æ –±—é–¥–∂–µ—Ç–∞ –¥–ª—è
                    –ø–æ–∫—Ä—ã—Ç–∏—è –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤.
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}