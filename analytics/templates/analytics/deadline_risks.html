{% extends 'base/base.html' %}
{% load static %}

{% block title %}–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∏—Å–∫–æ–≤ —Å—Ä—ã–≤–∞ —Å—Ä–æ–∫–æ–≤ - AI-ZAM{% endblock %}

{% block extra_head %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gsap@3.12.2/dist/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
{% endblock %}

{% block extra_styles %}
<style>
    .risk-container {
        position: relative;
        padding-bottom: 2rem;
    }
    
    .page-header {
        text-align: center;
        margin-bottom: 2rem;
        position: relative;
        z-index: 10;
    }
    
    .page-title {
        font-size: 2.2rem;
        font-weight: 800;
        margin-bottom: 0.5rem;
        background: linear-gradient(90deg, #ff3366, #ff9933);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        text-shadow: 0 0 15px rgba(255, 51, 102, 0.5);
    }
    
    .page-subtitle {
        font-size: 1.1rem;
        color: #aaa;
        margin-bottom: 1.5rem;
    }
    
    .back-btn {
        background: linear-gradient(45deg, #ff3366, #ff9933);
        color: white;
        padding: 0.8rem 1.5rem;
        border: none;
        border-radius: 25px;
        text-decoration: none;
        display: inline-block;
        margin-bottom: 2rem;
        font-weight: bold;
        transition: all 0.3s;
        position: relative;
        z-index: 10;
        box-shadow: 0 5px 15px rgba(255, 51, 102, 0.3);
    }
    
    .back-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(255, 51, 102, 0.5);
        color: white;
        text-decoration: none;
    }
    
    .project-tabs {
        display: flex;
        justify-content: center;
        margin-bottom: 2rem;
        position: relative;
        z-index: 10;
    }
    
    .project-tab {
        padding: 0.8rem 1.5rem;
        background: rgba(0, 0, 0, 0.5);
        border: 1px solid rgba(255, 51, 102, 0.3);
        color: #fff;
        cursor: pointer;
        transition: all 0.3s;
        margin: 0 0.5rem;
        border-radius: 5px;
    }
    
    .project-tab.active {
        background: linear-gradient(45deg, rgba(255, 51, 102, 0.2), rgba(255, 153, 51, 0.2));
        border-color: #ff3366;
        box-shadow: 0 0 15px rgba(255, 51, 102, 0.3);
    }
    
    .project-tab:hover {
        background: rgba(255, 51, 102, 0.1);
    }
    
    .dashboard-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1.5rem;
        margin-bottom: 2rem;
        position: relative;
        z-index: 10;
    }
    
    @media (max-width: 992px) {
        .dashboard-grid {
            grid-template-columns: 1fr;
        }
    }
    
    .dashboard-card {
        background: rgba(0, 0, 0, 0.7);
        border-radius: 15px;
        padding: 1.5rem;
        border: 1px solid rgba(255, 51, 102, 0.3);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(10px);
        opacity: 0;
        transform: translateY(20px);
    }
    
    .card-header {
        color: #ff3366;
        font-size: 1.3rem;
        font-weight: bold;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
    }
    
    .card-icon {
        margin-right: 0.5rem;
        font-size: 1.5rem;
    }
    
    .chart-container {
        position: relative;
        height: 300px;
        width: 100%;
    }
    
    .risk-meter-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 300px;
        position: relative;
    }
    
    .risk-meter {
        width: 200px;
        height: 200px;
        position: relative;
    }
    
    .risk-value {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 2.5rem;
        font-weight: bold;
        color: #fff;
    }
    
    .risk-label {
        margin-top: 1rem;
        font-size: 1.2rem;
        color: #aaa;
    }
    
    .risk-factors {
        margin-top: 1.5rem;
        width: 100%;
    }
    
    .risk-factor {
        margin-bottom: 1rem;
    }
    
    .risk-factor-label {
        display: flex;
        justify-content: space-between;
        margin-bottom: 0.3rem;
    }
    
    .risk-factor-name {
        color: #fff;
    }
    
    .risk-factor-value {
        color: #ff3366;
        font-weight: bold;
    }
    
    .risk-factor-bar {
        height: 8px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 4px;
        overflow: hidden;
    }
    
    .risk-factor-fill {
        height: 100%;
        border-radius: 4px;
        transition: width 1s ease-in-out;
    }
    
    .risk-low {
        background: linear-gradient(90deg, #00ff00, #99ff00);
    }
    
    .risk-medium {
        background: linear-gradient(90deg, #ffff00, #ffa500);
    }
    
    .risk-high {
        background: linear-gradient(90deg, #ffa500, #ff3366);
    }
    
    .risk-critical {
        background: linear-gradient(90deg, #ff3366, #ff0000);
    }
    
    .timeline {
        position: relative;
        margin: 2rem 0;
        padding-left: 2rem;
    }
    
    .timeline-line {
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        width: 2px;
        background: rgba(255, 51, 102, 0.5);
    }
    
    .timeline-item {
        position: relative;
        padding-bottom: 2rem;
        opacity: 0;
        transform: translateX(20px);
    }
    
    .timeline-dot {
        position: absolute;
        left: -2.5rem;
        top: 0;
        width: 1rem;
        height: 1rem;
        border-radius: 50%;
        background: #ff3366;
        border: 2px solid #000;
    }
    
    .timeline-date {
        font-size: 0.9rem;
        color: #ff3366;
        margin-bottom: 0.3rem;
    }
    
    .timeline-title {
        font-size: 1.1rem;
        color: #fff;
        margin-bottom: 0.3rem;
    }
    
    .timeline-desc {
        font-size: 0.9rem;
        color: #aaa;
    }
    
    .particles-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
    }
    
    .ml-insights {
        background: rgba(0, 0, 0, 0.7);
        border-radius: 15px;
        padding: 1.5rem;
        margin-top: 2rem;
        border: 1px solid rgba(255, 51, 102, 0.3);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(10px);
        position: relative;
        z-index: 10;
        opacity: 0;
        transform: translateY(20px);
    }
    
    .ml-insights-title {
        color: #ff3366;
        font-size: 1.5rem;
        font-weight: bold;
        margin-bottom: 1rem;
        text-align: center;
    }
    
    .insight-item {
        display: flex;
        align-items: center;
        margin-bottom: 1rem;
        padding: 0.8rem;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 10px;
        border-left: 4px solid #ff3366;
    }
    
    .insight-icon {
        margin-right: 1rem;
        font-size: 1.5rem;
        color: #ff3366;
    }
    
    .insight-text {
        font-size: 1rem;
        color: #fff;
    }
    
    .tech-badges {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        justify-content: center;
        margin-bottom: 1.5rem;
        position: relative;
        z-index: 10;
    }
    
    .tech-badge {
        background: linear-gradient(45deg, #ff3366, #ff9933);
        color: white;
        padding: 0.4rem 1rem;
        border-radius: 20px;
        font-size: 0.9rem;
        font-weight: bold;
        box-shadow: 0 3px 10px rgba(255, 51, 102, 0.3);
        transition: all 0.3s;
    }
    
    .tech-badge:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(255, 51, 102, 0.5);
    }
</style>
{% endblock %}

{% block content %}
<div id="particles-js" class="particles-bg"></div>

<div class="risk-container">
    <a href="{% url 'analytics:home' %}" class="back-btn">‚Üê –ù–∞–∑–∞–¥ –∫ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ</a>
    
    <div class="page-header">
        <h1 class="page-title">–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∏—Å–∫–æ–≤ —Å—Ä—ã–≤–∞ —Å—Ä–æ–∫–æ–≤</h1>
        <p class="page-subtitle">–ú–æ–¥–µ–ª–∏ –≥–ª—É–±–æ–∫–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–¥–µ—Ä–∂–µ–∫ –≤ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö</p>
    </div>
    
    <div class="tech-badges">
        <div class="tech-badge">Deep Learning</div>
        <div class="tech-badge">LSTM</div>
        <div class="tech-badge">Time Series</div>
        <div class="tech-badge">PyTorch</div>
        <div class="tech-badge">Predictive Analytics</div>
    </div>
    
    <div class="project-tabs">
        <div class="project-tab active" data-project="reconstruction">–†–µ–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –æ–±—ä–µ–∫—Ç–∞</div>
        <div class="project-tab" data-project="demolition">–°–Ω–æ—Å —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ–≥–æ –∫–æ–º–ø–ª–µ–∫—Å–∞</div>
    </div>
    
    <div class="dashboard-grid">
        <div class="dashboard-card" id="card1">
            <div class="card-header">
                <div class="card-icon">‚ö†Ô∏è</div>
                –û–±—â–∏–π —Ä–∏—Å–∫ —Å—Ä—ã–≤–∞ —Å—Ä–æ–∫–æ–≤
            </div>
            <div class="risk-meter-container">
                <div class="risk-meter">
                    <canvas id="riskGauge"></canvas>
                    <div class="risk-value" id="riskValue">68%</div>
                </div>
                <div class="risk-label">–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Å—Ä—ã–≤–∞ —Å—Ä–æ–∫–æ–≤</div>
            </div>
        </div>
        
        <div class="dashboard-card" id="card2">
            <div class="card-header">
                <div class="card-icon">üìä</div>
                –§–∞–∫—Ç–æ—Ä—ã —Ä–∏—Å–∫–∞
            </div>
            <div class="risk-factors">
                <div class="risk-factor">
                    <div class="risk-factor-label">
                        <span class="risk-factor-name">–ù–µ—Ö–≤–∞—Ç–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤</span>
                        <span class="risk-factor-value" id="factor1">75%</span>
                    </div>
                    <div class="risk-factor-bar">
                        <div class="risk-factor-fill risk-high" id="factor1-bar" style="width: 75%"></div>
                    </div>
                </div>
                
                <div class="risk-factor">
                    <div class="risk-factor-label">
                        <span class="risk-factor-name">–ü–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è</span>
                        <span class="risk-factor-value" id="factor2">45%</span>
                    </div>
                    <div class="risk-factor-bar">
                        <div class="risk-factor-fill risk-medium" id="factor2-bar" style="width: 45%"></div>
                    </div>
                </div>
                
                <div class="risk-factor">
                    <div class="risk-factor-label">
                        <span class="risk-factor-name">–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±—Ä–∏–≥–∞–¥</span>
                        <span class="risk-factor-value" id="factor3">30%</span>
                    </div>
                    <div class="risk-factor-bar">
                        <div class="risk-factor-fill risk-low" id="factor3-bar" style="width: 30%"></div>
                    </div>
                </div>
                
                <div class="risk-factor">
                    <div class="risk-factor-label">
                        <span class="risk-factor-name">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã</span>
                        <span class="risk-factor-value" id="factor4">85%</span>
                    </div>
                    <div class="risk-factor-bar">
                        <div class="risk-factor-fill risk-critical" id="factor4-bar" style="width: 85%"></div>
                    </div>
                </div>
                
                <div class="risk-factor">
                    <div class="risk-factor-label">
                        <span class="risk-factor-name">–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è</span>
                        <span class="risk-factor-value" id="factor5">60%</span>
                    </div>
                    <div class="risk-factor-bar">
                        <div class="risk-factor-fill risk-medium" id="factor5-bar" style="width: 60%"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="dashboard-card" id="card3">
            <div class="card-header">
                <div class="card-icon">üìà</div>
                –ü—Ä–æ–≥–Ω–æ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫ –ø–æ —ç—Ç–∞–ø–∞–º
            </div>
            <div class="chart-container">
                <canvas id="delayChart"></canvas>
            </div>
        </div>
        
        <div class="dashboard-card" id="card4">
            <div class="card-header">
                <div class="card-icon">üîÆ</div>
                –ü—Ä–æ–≥–Ω–æ–∑ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ —Å—Ä—ã–≤–∞ —Å—Ä–æ–∫–æ–≤
            </div>
            <div class="chart-container">
                <canvas id="predictionChart"></canvas>
            </div>
        </div>
    </div>
    
    <div class="dashboard-card" id="card5">
        <div class="card-header">
            <div class="card-icon">‚è±Ô∏è</div>
            –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–æ—á–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
        </div>
        <div class="timeline">
            <div class="timeline-line"></div>
            
            <div class="timeline-item" id="timeline1">
                <div class="timeline-dot"></div>
                <div class="timeline-date">15 –∏—é–Ω—è 2025</div>
                <div class="timeline-title">–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –º–æ–Ω—Ç–∞–∂–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π</div>
                <div class="timeline-desc">–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ –∑–∞–¥–µ—Ä–∂–∫–∏ –∏–∑-–∑–∞ –Ω–µ—Ö–≤–∞—Ç–∫–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞—Ä–∞–Ω–µ–µ –∑–∞–∫–∞–∑–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã.</div>
            </div>
            
            <div class="timeline-item" id="timeline2">
                <div class="timeline-dot"></div>
                <div class="timeline-date">10 –∏—é–ª—è 2025</div>
                <div class="timeline-title">–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã—Ö —Å–∏—Å—Ç–µ–º</div>
                <div class="timeline-desc">–°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫ –∑–∞–¥–µ—Ä–∂–∫–∏ –∏–∑-–∑–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–∏–≤–ª–µ—á—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤.</div>
            </div>
            
            <div class="timeline-item" id="timeline3">
                <div class="timeline-dot"></div>
                <div class="timeline-date">5 –∞–≤–≥—É—Å—Ç–∞ 2025</div>
                <div class="timeline-title">–û—Ç–¥–µ–ª–æ—á–Ω—ã–µ —Ä–∞–±–æ—Ç—ã</div>
                <div class="timeline-desc">–ù–∏–∑–∫–∏–π —Ä–∏—Å–∫ –∑–∞–¥–µ—Ä–∂–∫–∏. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–π —Ç–µ–º–ø —Ä–∞–±–æ—Ç.</div>
            </div>
            
            <div class="timeline-item" id="timeline4">
                <div class="timeline-dot"></div>
                <div class="timeline-date">20 –∞–≤–≥—É—Å—Ç–∞ 2025</div>
                <div class="timeline-title">–°–¥–∞—á–∞ –æ–±—ä–µ–∫—Ç–∞</div>
                <div class="timeline-desc">–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ä–∏—Å–∫ –∑–∞–¥–µ—Ä–∂–∫–∏ –∏–∑-–∑–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–π. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—á–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–π –∑–∞—Ä–∞–Ω–µ–µ.</div>
            </div>
        </div>
    </div>
    
    <div class="ml-insights" id="mlInsights">
        <h2 class="ml-insights-title">–ò–Ω—Å–∞–π—Ç—ã –º–æ–¥–µ–ª–∏ –≥–ª—É–±–æ–∫–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è</h2>
        
        <div class="insight-item">
            <div class="insight-icon">üîç</div>
            <div class="insight-text">–ú–æ–¥–µ–ª—å LSTM –æ–±–Ω–∞—Ä—É–∂–∏–ª–∞ –ø–∞—Ç—Ç–µ—Ä–Ω –∑–∞–¥–µ—Ä–∂–µ–∫ –≤ –ø–æ—Å—Ç–∞–≤–∫–∞—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —Å—Ä—ã–≤—É —Å—Ä–æ–∫–æ–≤ –Ω–∞ 2-3 –Ω–µ–¥–µ–ª–∏</div>
        </div>
        
        <div class="insight-item">
            <div class="insight-icon">‚ö†Ô∏è</div>
            <div class="insight-text">–ü—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ—Ç—Å—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –Ω–∞ —ç—Ç–∞–ø–µ –º–æ–Ω—Ç–∞–∂–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –∏–∑-–∑–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º —Å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ–º</div>
        </div>
        
        <div class="insight-item">
            <div class="insight-icon">üí°</div>
            <div class="insight-text">–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–±–æ—á–∏—Ö –Ω–∞ —ç—Ç–∞–ø–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã—Ö —Å–∏—Å—Ç–µ–º –¥–ª—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∑–∞–¥–µ—Ä–∂–µ–∫</div>
        </div>
        
        <div class="insight-item">
            <div class="insight-icon">üìà</div>
            <div class="insight-text">–ê–Ω–∞–ª–∏–∑ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Å—Ä—ã–≤–∞ —Å—Ä–æ–∫–æ–≤ —Å–Ω–∏–∑–∏—Ç—Å—è –Ω–∞ 35% –ø—Ä–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ª–æ–≥–∏—Å—Ç–∏–∫–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤</div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–∞—Å—Ç–∏—Ü
    particlesJS('particles-js', {
        particles: {
            number: {
                value: 50,
                density: {
                    enable: true,
                    value_area: 800
                }
            },
            color: {
                value: '#ff3366'
            },
            shape: {
                type: 'circle',
                stroke: {
                    width: 0,
                    color: '#000000'
                }
            },
            opacity: {
                value: 0.5,
                random: true,
                anim: {
                    enable: true,
                    speed: 1,
                    opacity_min: 0.1,
                    sync: false
                }
            },
            size: {
                value: 3,
                random: true,
                anim: {
                    enable: true,
                    speed: 2,
                    size_min: 0.1,
                    sync: false
                }
            },
            line_linked: {
                enable: true,
                distance: 150,
                color: '#ff3366',
                opacity: 0.2,
                width: 1
            },
            move: {
                enable: true,
                speed: 1,
                direction: 'none',
                random: true,
                straight: false,
                out_mode: 'out',
                bounce: false
            }
        },
        interactivity: {
            detect_on: 'canvas',
            events: {
                onhover: {
                    enable: true,
                    mode: 'grab'
                },
                onclick: {
                    enable: true,
                    mode: 'push'
                },
                resize: true
            },
            modes: {
                grab: {
                    distance: 140,
                    line_linked: {
                        opacity: 0.5
                    }
                },
                push: {
                    particles_nb: 4
                }
            }
        },
        retina_detect: true
    });
    
    // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤
    gsap.to('.dashboard-card', {
        opacity: 1,
        y: 0,
        duration: 0.8,
        stagger: 0.2,
        ease: 'power3.out'
    });
    
    gsap.to('#mlInsights', {
        opacity: 1,
        y: 0,
        duration: 0.8,
        delay: 0.8,
        ease: 'power3.out'
    });
    
    gsap.to('.timeline-item', {
        opacity: 1,
        x: 0,
        duration: 0.8,
        stagger: 0.2,
        delay: 1,
        ease: 'power3.out'
    });
    
    // –î–∞–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–æ–µ–∫—Ç–æ–≤
    const projectsData = {
        reconstruction: {
            riskValue: 68,
            factors: [
                {name: "–ù–µ—Ö–≤–∞—Ç–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤", value: 75, class: "risk-high"},
                {name: "–ü–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è", value: 45, class: "risk-medium"},
                {name: "–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±—Ä–∏–≥–∞–¥", value: 30, class: "risk-low"},
                {name: "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã", value: 85, class: "risk-critical"},
                {name: "–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è", value: 60, class: "risk-medium"}
            ],
            delayData: {
                labels: ['–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞', '–§—É–Ω–¥–∞–º–µ–Ω—Ç', '–ö–∞—Ä–∫–∞—Å', '–ü–µ—Ä–µ–∫—Ä—ã—Ç–∏—è', '–ò–Ω–∂–µ–Ω–µ—Ä–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã', '–û—Ç–¥–µ–ª–∫–∞', '–°–¥–∞—á–∞'],
                datasets: [
                    {
                        label: '–ü—Ä–æ–≥–Ω–æ–∑ –∑–∞–¥–µ—Ä–∂–∫–∏ (–¥–Ω–∏)',
                        data: [1, 3, 7, 5, 12, 4, 8],
                        backgroundColor: 'rgba(255, 51, 102, 0.5)',
                        borderColor: 'rgba(255, 51, 102, 1)',
                        borderWidth: 1
                    }
                ]
            },
            predictionData: {
                labels: ['–ò—é–Ω—å', '–ò—é–ª—å', '–ê–≤–≥—É—Å—Ç', '–°–µ–Ω—Ç—è–±—Ä—å', '–û–∫—Ç—è–±—Ä—å', '–ù–æ—è–±—Ä—å'],
                datasets: [
                    {
                        label: '–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Å—Ä—ã–≤–∞ —Å—Ä–æ–∫–æ–≤',
                        data: [35, 48, 68, 75, 62, 55],
                        borderColor: '#ff3366',
                        backgroundColor: 'rgba(255, 51, 102, 0.1)',
                        fill: true,
                        tension: 0.4
                    },
                    {
                        label: '–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø–æ—Ä–æ–≥',
                        data: [50, 50, 50, 50, 50, 50],
                        borderColor: 'rgba(255, 255, 255, 0.5)',
                        borderDash: [5, 5],
                        fill: false,
                        pointRadius: 0
                    }
                ]
            },
            timeline: [
                {date: "15 –∏—é–Ω—è 2025", title: "–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –º–æ–Ω—Ç–∞–∂–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π", desc: "–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ –∑–∞–¥–µ—Ä–∂–∫–∏ –∏–∑-–∑–∞ –Ω–µ—Ö–≤–∞—Ç–∫–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞—Ä–∞–Ω–µ–µ –∑–∞–∫–∞–∑–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã."},
                {date: "10 –∏—é–ª—è 2025", title: "–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã—Ö —Å–∏—Å—Ç–µ–º", desc: "–°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫ –∑–∞–¥–µ—Ä–∂–∫–∏ –∏–∑-–∑–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–∏–≤–ª–µ—á—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤."},
                {date: "5 –∞–≤–≥—É—Å—Ç–∞ 2025", title: "–û—Ç–¥–µ–ª–æ—á–Ω—ã–µ —Ä–∞–±–æ—Ç—ã", desc: "–ù–∏–∑–∫–∏–π —Ä–∏—Å–∫ –∑–∞–¥–µ—Ä–∂–∫–∏. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–π —Ç–µ–º–ø —Ä–∞–±–æ—Ç."},
                {date: "20 –∞–≤–≥—É—Å—Ç–∞ 2025", title: "–°–¥–∞—á–∞ –æ–±—ä–µ–∫—Ç–∞", desc: "–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ä–∏—Å–∫ –∑–∞–¥–µ—Ä–∂–∫–∏ –∏–∑-–∑–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–π. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—á–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–π –∑–∞—Ä–∞–Ω–µ–µ."}
            ]
        },
        demolition: {
            riskValue: 42,
            factors: [
                {name: "–ù–µ—Ö–≤–∞—Ç–∫–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤", value: 25, class: "risk-low"},
                {name: "–ü–æ–≥–æ–¥–Ω—ã–µ —É—Å–ª–æ–≤–∏—è", value: 65, class: "risk-medium"},
                {name: "–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±—Ä–∏–≥–∞–¥", value: 40, class: "risk-medium"},
                {name: "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã", value: 55, class: "risk-medium"},
                {name: "–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è", value: 30, class: "risk-low"}
            ],
            delayData: {
                labels: ['–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞', '–û—Ç–∫–ª—é—á–µ–Ω–∏–µ', '–î–µ–º–æ–Ω—Ç–∞–∂', '–°–Ω–æ—Å', '–í—ã–≤–æ–∑', '–ü–ª–∞–Ω–∏—Ä–æ–≤–∫–∞', '–°–¥–∞—á–∞'],
                datasets: [
                    {
                        label: '–ü—Ä–æ–≥–Ω–æ–∑ –∑–∞–¥–µ—Ä–∂–∫–∏ (–¥–Ω–∏)',
                        data: [0, 2, 4, 3, 8, 2, 3],
                        backgroundColor: 'rgba(255, 51, 102, 0.5)',
                        borderColor: 'rgba(255, 51, 102, 1)',
                        borderWidth: 1
                    }
                ]
            },
            predictionData: {
                labels: ['–ò—é–Ω—å', '–ò—é–ª—å', '–ê–≤–≥—É—Å—Ç', '–°–µ–Ω—Ç—è–±—Ä—å', '–û–∫—Ç—è–±—Ä—å', '–ù–æ—è–±—Ä—å'],
                datasets: [
                    {
                        label: '–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å —Å—Ä—ã–≤–∞ —Å—Ä–æ–∫–æ–≤',
                        data: [20, 35, 42, 38, 30, 25],
                        borderColor: '#ff3366',
                        backgroundColor: 'rgba(255, 51, 102, 0.1)',
                        fill: true,
                        tension: 0.4
                    },
                    {
                        label: '–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø–æ—Ä–æ–≥',
                        data: [50, 50, 50, 50, 50, 50],
                        borderColor: 'rgba(255, 255, 255, 0.5)',
                        borderDash: [5, 5],
                        fill: false,
                        pointRadius: 0
                    }
                ]
            },
            timeline: [
                {date: "5 –∏—é–Ω—è 2025", title: "–û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–π", desc: "–ù–∏–∑–∫–∏–π —Ä–∏—Å–∫ –∑–∞–¥–µ—Ä–∂–∫–∏. –í—Å–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è –ø–æ–ª—É—á–µ–Ω—ã –∑–∞—Ä–∞–Ω–µ–µ."},
                {date: "20 –∏—é–Ω—è 2025", title: "–î–µ–º–æ–Ω—Ç–∞–∂ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è", desc: "–°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫ –∑–∞–¥–µ—Ä–∂–∫–∏ –∏–∑-–∑–∞ –ø–æ–≥–æ–¥–Ω—ã—Ö —É—Å–ª–æ–≤–∏–π. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∑–∞—â–∏—Ç–Ω—ã–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏."},
                {date: "15 –∏—é–ª—è 2025", title: "–°–Ω–æ—Å –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π", desc: "–°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫ –∑–∞–¥–µ—Ä–∂–∫–∏ –∏–∑-–∑–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ."},
                {date: "10 –∞–≤–≥—É—Å—Ç–∞ 2025", title: "–í—ã–≤–æ–∑ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–æ–≥–æ –º—É—Å–æ—Ä–∞", desc: "–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ –∑–∞–¥–µ—Ä–∂–∫–∏ –∏–∑-–∑–∞ –ª–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞—Ä–∞–Ω–µ–µ –¥–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è –æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–º —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–µ."}
            ]
        }
    };
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ –∏ –¥–∞–Ω–Ω—ã—Ö
    let riskGauge, delayChart, predictionChart;
    
    function initCharts(projectKey) {
        const project = projectsData[projectKey];
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è —Ä–∏—Å–∫–∞
        document.getElementById('riskValue').textContent = project.riskValue + '%';
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∞–∫—Ç–æ—Ä–æ–≤ —Ä–∏—Å–∫–∞
        project.factors.forEach((factor, index) => {
            const factorId = `factor${index + 1}`;
            const barId = `factor${index + 1}-bar`;
            
            if (document.getElementById(factorId)) {
                document.getElementById(factorId).textContent = factor.value + '%';
                const bar = document.getElementById(barId);
                bar.style.width = factor.value + '%';
                bar.className = `risk-factor-fill ${factor.class}`;
            }
        });
        
        // –ì—Ä–∞—Ñ–∏–∫ —Ä–∏—Å–∫–∞ (–∫—Ä—É–≥–æ–≤–æ–π)
        const riskCtx = document.getElementById('riskGauge').getContext('2d');
        
        if (riskGauge) {
            riskGauge.destroy();
        }
        
        riskGauge = new Chart(riskCtx, {
            type: 'doughnut',
            data: {
                datasets: [{
                    data: [project.riskValue, 100 - project.riskValue],
                    backgroundColor: [
                        project.riskValue > 75 ? '#ff0000' : 
                        project.riskValue > 50 ? '#ff3366' : 
                        project.riskValue > 25 ? '#ff9933' : '#00ff00',
                        'rgba(255, 255, 255, 0.1)'
                    ],
                    borderWidth: 0
                }]
            },
            options: {
                cutout: '70%',
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        enabled: false
                    }
                },
                animation: {
                    animateRotate: true,
                    animateScale: true,
                    duration: 2000,
                    easing: 'easeOutQuart'
                }
            }
        });
        
        // –ì—Ä–∞—Ñ–∏–∫ –∑–∞–¥–µ—Ä–∂–µ–∫
        const delayCtx = document.getElementById('delayChart').getContext('2d');
        
        if (delayChart) {
            delayChart.destroy();
        }
        
        delayChart = new Chart(delayCtx, {
            type: 'bar',
            data: project.delayData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top',
                        labels: {
                            color: '#fff',
                            font: {
                                size: 12
                            }
                        }
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        titleColor: '#ff3366',
                        bodyColor: '#fff',
                        borderColor: '#ff3366',
                        borderWidth: 1
                    }
                },
                scales: {
                    x: {
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        ticks: {
                            color: '#aaa'
                        }
                    },
                    y: {
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        ticks: {
                            color: '#aaa',
                            callback: function(value) {
                                return value + ' –¥–Ω.';
                            }
                        }
                    }
                },
                animation: {
                    duration: 2000,
                    easing: 'easeOutQuart'
                }
            }
        });
        
        // –ì—Ä–∞—Ñ–∏–∫ –ø—Ä–æ–≥–Ω–æ–∑–∞
        const predictionCtx = document.getElementById('predictionChart').getContext('2d');
        
        if (predictionChart) {
            predictionChart.destroy();
        }
        
        predictionChart = new Chart(predictionCtx, {
            type: 'line',
            data: project.predictionData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top',
                        labels: {
                            color: '#fff',
                            font: {
                                size: 12
                            }
                        }
                    },
                    tooltip: {
                        mode: 'index',
                        intersect: false,
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        titleColor: '#ff3366',
                        bodyColor: '#fff',
                        borderColor: '#ff3366',
                        borderWidth: 1
                    }
                },
                scales: {
                    x: {
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        ticks: {
                            color: '#aaa'
                        }
                    },
                    y: {
                        grid: {
                            color: 'rgba(255, 255, 255, 0.1)'
                        },
                        ticks: {
                            color: '#aaa',
                            callback: function(value) {
                                return value + '%';
                            }
                        },
                        min: 0,
                        max: 100
                    }
                },
                animation: {
                    duration: 2000,
                    easing: 'easeOutQuart'
                }
            }
        });
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–π —à–∫–∞–ª—ã
        const timelineItems = document.querySelectorAll('.timeline-item');
        project.timeline.forEach((item, index) => {
            if (timelineItems[index]) {
                const dateEl = timelineItems[index].querySelector('.timeline-date');
                const titleEl = timelineItems[index].querySelector('.timeline-title');
                const descEl = timelineItems[index].querySelector('.timeline-desc');
                
                if (dateEl) dateEl.textContent = item.date;
                if (titleEl) titleEl.textContent = item.title;
                if (descEl) descEl.textContent = item.desc;
            }
        });
    }
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å –ø–µ—Ä–≤—ã–º –ø—Ä–æ–µ–∫—Ç–æ–º
    initCharts('reconstruction');
    
    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –ø—Ä–æ–µ–∫—Ç–∞–º–∏
    document.querySelectorAll('.project-tab').forEach(tab => {
        tab.addEventListener('click', function() {
            document.querySelectorAll('.project-tab').forEach(t => t.classList.remove('active'));
            this.classList.add('active');
            
            const projectKey = this.getAttribute('data-project');
            initCharts(projectKey);
        });
    });
});
</script>
{% endblock %}